<div class="dialog-container">
  <div class="dialog-header">
    <div class="header-content">
      <h2 class="dialog-title">{{ esNuevo ? "Registrar" : "Editar" }} Clase</h2>
      <p class="dialog-subtitle">
        Complete los campos para {{ esNuevo ? "registrar" : "actualizar" }} una
        clase en el sistema
      </p>
    </div>
    <button mat-icon-button mat-dialog-close class="close-button">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <div class="dialog-content">
    <form [formGroup]="claseForm" class="form-container">
      <!-- Primera fila: Código y Familia -->
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Código Clase</label>
          <input
            class="form-input"
            formControlName="id_clase"
            placeholder="Ej: QUIM, MAT_PRIMA"
            maxlength="50"
            style="text-transform: uppercase"
          />
          <div
            class="error-message"
            *ngIf="
              claseForm.get('id_clase')?.hasError('required') &&
              claseForm.get('id_clase')?.touched
            "
          >
            El código de clase es requerido
          </div>
          <div
            class="error-message"
            *ngIf="
              claseForm.get('id_clase')?.hasError('pattern') &&
              claseForm.get('id_clase')?.touched
            "
          >
            Solo se permiten letras mayúsculas y guiones bajos
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Familia</label>
          <input
            class="form-input"
            formControlName="familia"
            placeholder="Ej: Químicos, Materia Prima"
            maxlength="100"
          />
          <div
            class="error-message"
            *ngIf="
              claseForm.get('familia')?.hasError('required') &&
              claseForm.get('familia')?.touched
            "
          >
            La familia es requerida
          </div>
        </div>
      </div>

      <!-- Segunda fila: Subfamilia -->
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Subfamilia</label>
          <input
            class="form-input"
            formControlName="sub_familia"
            placeholder="Ej: Químicos Básicos, Fibras"
            maxlength="100"
          />
          <div
            class="error-message"
            *ngIf="
              claseForm.get('sub_familia')?.hasError('required') &&
              claseForm.get('sub_familia')?.touched
            "
          >
            La subfamilia es requerida
          </div>
        </div>
      </div>
    </form>
  </div>

  <div class="dialog-actions">
    <button class="btn-cancel" (click)="onCancel()">Cancelar</button>
    <button
      class="btn-save"
      [disabled]="claseForm.invalid"
      (click)="onSubmit()"
    >
      {{ esNuevo ? "Registrar" : "Actualizar" }} Clase
    </button>
  </div>
</div>
