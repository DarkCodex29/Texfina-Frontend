<div class="dialog-container">
  <div class="dialog-header">
    <h2 class="dialog-title">{{ esNuevo ? 'Nueva clase' : 'Editar clase' }}</h2>
    <button mat-icon-button (click)="onCancel()" class="close-button">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <form [formGroup]="claseForm" (ngSubmit)="onSubmit()" class="dialog-form">
    <div class="form-content">
      <!-- Primera fila - Código -->
      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Código *</mat-label>
          <input
            matInput
            formControlName="id_clase"
            placeholder="Ej: QUIM, MAT_PRIMA"
            style="text-transform: uppercase"
          />
          <mat-hint>Solo letras mayúsculas y guiones bajos</mat-hint>
          <mat-error *ngIf="claseForm.get('id_clase')?.hasError('required')">
            El código es requerido
          </mat-error>
          <mat-error *ngIf="claseForm.get('id_clase')?.hasError('pattern')">
            Solo se permiten letras mayúsculas y guiones bajos
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Segunda fila - Familia -->
      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Familia *</mat-label>
          <input
            matInput
            formControlName="familia"
            placeholder="Ej: Químicos, Materia Prima"
          />
          <mat-error *ngIf="claseForm.get('familia')?.hasError('required')">
            La familia es requerida
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Tercera fila - Subfamilia -->
      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Subfamilia *</mat-label>
          <input
            matInput
            formControlName="sub_familia"
            placeholder="Ej: Químicos Básicos, Fibras"
          />
          <mat-error *ngIf="claseForm.get('sub_familia')?.hasError('required')">
            La subfamilia es requerida
          </mat-error>
        </mat-form-field>
      </div>
    </div>

    <div class="dialog-actions">
      <button
        mat-button
        type="button"
        (click)="onCancel()"
        class="btn-cancelar"
      >
        Cancelar
      </button>
      <button
        mat-raised-button
        color="primary"
        type="submit"
        [disabled]="!claseForm.valid"
        class="btn-guardar"
      >
        <mat-icon>save</mat-icon>
        {{ esNuevo ? 'Crear' : 'Actualizar' }}
      </button>
    </div>
  </form>
</div>
