<div class="dialog-container">
  <div class="dialog-header">
    <h2 class="dialog-title">
      {{ esEdicion ? "Editar" : "Registrar" }} Material
    </h2>
    <p class="dialog-subtitle">
      Complete los campos para {{ esEdicion ? "actualizar" : "registrar" }} un
      material
    </p>
  </div>

  <div class="dialog-content">
    <form [formGroup]="materialForm">
      <!-- Primera fila: Información básica -->
      <div class="form-row">
        <mat-form-field appearance="outline">
          <mat-label>Código Fox</mat-label>
          <input matInput formControlName="id_fox" placeholder="Ej: ALG001" />
          <mat-error *ngIf="materialForm.get('id_fox')?.hasError('required')">
            El código es requerido
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Nombre del Material</mat-label>
          <input
            matInput
            formControlName="nombre"
            placeholder="Ej: Algodón Peinado"
          />
          <mat-error *ngIf="materialForm.get('nombre')?.hasError('required')">
            El nombre es requerido
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Segunda fila: Clase y unidad -->
      <div class="form-row">
        <mat-form-field appearance="outline">
          <mat-label>Clase</mat-label>
          <mat-select formControlName="id_clase">
            <mat-option *ngFor="let clase of clases" [value]="clase.id_clase">
              {{ clase.familia }} - {{ clase.sub_familia }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Unidad</mat-label>
          <mat-select formControlName="id_unidad">
            <mat-option
              *ngFor="let unidad of unidades"
              [value]="unidad.id_unidad"
            >
              {{ unidad.nombre }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <!-- Tercera fila: Peso unitario y presentación -->
      <div class="form-row">
        <mat-form-field appearance="outline">
          <mat-label>Peso Unitario</mat-label>
          <input
            matInput
            type="number"
            formControlName="peso_unitario"
            placeholder="Ej: 1.5"
          />
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Presentación</mat-label>
          <input
            matInput
            formControlName="presentacion"
            placeholder="Ej: Rollo 50kg"
          />
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Precio Unitario</mat-label>
          <input
            matInput
            type="number"
            formControlName="precio_unitario"
            placeholder="Ej: 15.50"
          />
          <span matPrefix>S/ &nbsp;</span>
        </mat-form-field>
      </div>
    </form>
  </div>

  <div class="dialog-actions">
    <button mat-button class="btn-cancelar" (click)="onCancel()">
      Cancelar
    </button>
    <button
      mat-raised-button
      class="btn-guardar"
      [disabled]="materialForm.invalid"
      (click)="onSubmit()"
    >
      {{ esEdicion ? "Actualizar" : "Registrar" }}
    </button>
  </div>
</div>
