<div class="page-container">
  <div class="page-content">
    <div class="page-header">
      <div class="header-content">
        <h1 class="page-title text-texfina text-primary">Configuración</h1>
      </div>
      <div class="header-actions">
        <button
          class="btn-texfina btn-primary"
          [disabled]="!hayCambios"
          (click)="guardarConfiguracion()"
        >
          <mat-icon>save</mat-icon>
          Guardar Cambios
        </button>
      </div>
    </div>

    <div class="config-card">
      <p-accordion>
        <!-- Información de la Empresa -->
        <p-accordionpanel>
          <p-accordionheader>
            <span class="accordion-header">
              <i class="pi pi-building"></i>
              <span>Información de la Empresa</span>
            </span>
          </p-accordionheader>
          <p-accordioncontent>
            <div class="form-grid">
                    <p-floatlabel>
                      <input
                        pInputText
                        id="empresa-nombre"
                        [(ngModel)]="configuracion.empresa.nombre"
                        (ngModelChange)="marcarCambios()"
                        class="w-full"
                        placeholder=" "
                      />
                      <label for="empresa-nombre">Nombre de la Empresa</label>
                    </p-floatlabel>

                    <p-floatlabel>
                      <input
                        pInputText
                        id="empresa-ruc"
                        [(ngModel)]="configuracion.empresa.ruc"
                        (ngModelChange)="marcarCambios()"
                        class="w-full"
                        placeholder=" "
                      />
                      <label for="empresa-ruc">RUC</label>
                    </p-floatlabel>

                    <p-floatlabel>
                      <input
                        pInputText
                        id="empresa-direccion"
                        [(ngModel)]="configuracion.empresa.direccion"
                        (ngModelChange)="marcarCambios()"
                        class="w-full"
                        placeholder=" "
                      />
                      <label for="empresa-direccion">Dirección</label>
                    </p-floatlabel>

                    <p-floatlabel>
                      <input
                        pInputText
                        id="empresa-telefono"
                        [(ngModel)]="configuracion.empresa.telefono"
                        (ngModelChange)="marcarCambios()"
                        class="w-full"
                        placeholder=" "
                      />
                      <label for="empresa-telefono">Teléfono</label>
                    </p-floatlabel>

                    <p-floatlabel>
                      <input
                        pInputText
                        id="empresa-email"
                        type="email"
                        [(ngModel)]="configuracion.empresa.email"
                        (ngModelChange)="marcarCambios()"
                        class="w-full"
                        placeholder=" "
                      />
                      <label for="empresa-email">Email</label>
                    </p-floatlabel>

                    <p-floatlabel>
                      <input
                        pInputText
                        id="empresa-sitio"
                        [(ngModel)]="configuracion.empresa.sitio_web"
                        (ngModelChange)="marcarCambios()"
                        class="w-full"
                        placeholder=" "
                      />
                      <label for="empresa-sitio">Sitio Web</label>
                    </p-floatlabel>
            </div>
          </p-accordioncontent>
        </p-accordionpanel>

        <!-- Configuración del Sistema -->
        <p-accordionpanel>
          <p-accordionheader>
            <span class="accordion-header">
              <i class="pi pi-cog"></i>
              <span>Configuración del Sistema</span>
            </span>
          </p-accordionheader>
          <p-accordioncontent>
            <div class="form-grid">
                    <p-floatlabel>
                      <p-select
                        id="zona-horaria"
                        [options]="zonaHorariaOpciones"
                        [(ngModel)]="configuracion.sistema.zona_horaria"
                        (onChange)="marcarCambios()"
                        class="w-full"
                      ></p-select>
                      <label for="zona-horaria">Zona Horaria</label>
                    </p-floatlabel>

                    <p-floatlabel>
                      <p-select
                        id="idioma"
                        [options]="idiomaOpciones"
                        [(ngModel)]="configuracion.sistema.idioma"
                        (onChange)="marcarCambios()"
                        class="w-full"
                      ></p-select>
                      <label for="idioma">Idioma por Defecto</label>
                    </p-floatlabel>

                    <p-floatlabel>
                      <p-select
                        id="formato-fecha"
                        [options]="formatoFechaOpciones"
                        [(ngModel)]="configuracion.sistema.formato_fecha"
                        (onChange)="marcarCambios()"
                        class="w-full"
                      ></p-select>
                      <label for="formato-fecha">Formato de Fecha</label>
                    </p-floatlabel>

                    <p-floatlabel>
                      <p-select
                        id="moneda"
                        [options]="monedaOpciones"
                        [(ngModel)]="configuracion.sistema.moneda"
                        (onChange)="marcarCambios()"
                        class="w-full"
                      ></p-select>
                      <label for="moneda">Moneda</label>
                    </p-floatlabel>
            </div>
          </p-accordioncontent>
        </p-accordionpanel>

        <!-- Configuración de Inventario -->
        <p-accordionpanel>
          <p-accordionheader>
            <span class="accordion-header">
              <i class="pi pi-box"></i>
              <span>Configuración de Inventario</span>
            </span>
          </p-accordionheader>
          <p-accordioncontent>
            <div class="form-grid">
                    <p-floatlabel>
                      <input
                        pInputText
                        id="stock-minimo"
                        type="number"
                        [(ngModel)]="configuracion.inventario.stock_minimo_defecto"
                        (ngModelChange)="marcarCambios()"
                        class="w-full"
                        placeholder=" "
                      />
                      <label for="stock-minimo">Stock Mínimo por Defecto</label>
                    </p-floatlabel>

                    <p-floatlabel>
                      <input
                        pInputText
                        id="stock-maximo"
                        type="number"
                        [(ngModel)]="configuracion.inventario.stock_maximo_defecto"
                        (ngModelChange)="marcarCambios()"
                        class="w-full"
                        placeholder=" "
                      />
                      <label for="stock-maximo">Stock Máximo por Defecto</label>
                    </p-floatlabel>

                    <p-floatlabel>
                      <p-select
                        id="metodo-valorizacion"
                        [options]="metodoValorizacionOpciones"
                        [(ngModel)]="configuracion.inventario.metodo_valorizacion"
                        (onChange)="marcarCambios()"
                        class="w-full"
                      ></p-select>
                      <label for="metodo-valorizacion">Método de Valorización</label>
                    </p-floatlabel>
            </div>
          </p-accordioncontent>
        </p-accordionpanel>

        <!-- Configuración de Usuarios -->
        <p-accordionpanel>
          <p-accordionheader>
            <span class="accordion-header">
              <i class="pi pi-users"></i>
              <span>Configuración de Usuarios</span>
            </span>
          </p-accordionheader>
          <p-accordioncontent>
            <div class="form-grid">
                    <p-floatlabel>
                      <input
                        pInputText
                        id="expiracion-password"
                        type="number"
                        [(ngModel)]="configuracion.usuarios.dias_expiracion_password"
                        (ngModelChange)="marcarCambios()"
                        class="w-full"
                        placeholder=" "
                      />
                      <label for="expiracion-password">Días para Expirar Contraseña</label>
                    </p-floatlabel>

                    <p-floatlabel>
                      <input
                        pInputText
                        id="max-intentos"
                        type="number"
                        [(ngModel)]="configuracion.usuarios.max_intentos_login"
                        (ngModelChange)="marcarCambios()"
                        class="w-full"
                        placeholder=" "
                      />
                      <label for="max-intentos">Máximo Intentos de Login</label>
                    </p-floatlabel>

                    <p-floatlabel>
                      <input
                        pInputText
                        id="duracion-sesion"
                        type="number"
                        [(ngModel)]="configuracion.usuarios.duracion_sesion_horas"
                        (ngModelChange)="marcarCambios()"
                        class="w-full"
                        placeholder=" "
                      />
                      <label for="duracion-sesion">Duración de Sesión (horas)</label>
                    </p-floatlabel>
            </div>
          </p-accordioncontent>
        </p-accordionpanel>

        <!-- Configuración de Auditoría -->
        <p-accordionpanel>
          <p-accordionheader>
            <span class="accordion-header">
              <i class="pi pi-shield"></i>
              <span>Configuración de Auditoría</span>
            </span>
          </p-accordionheader>
          <p-accordioncontent>
            <div class="form-grid">
                    <p-floatlabel>
                      <input
                        pInputText
                        id="retencion-logs"
                        type="number"
                        [(ngModel)]="configuracion.auditoria.dias_retencion_logs"
                        (ngModelChange)="marcarCambios()"
                        class="w-full"
                        placeholder=" "
                      />
                      <label for="retencion-logs">Días de Retención de Logs</label>
                    </p-floatlabel>

                    <p-floatlabel>
                      <p-select
                        id="nivel-log"
                        [options]="nivelLogOpciones"
                        [(ngModel)]="configuracion.auditoria.nivel_log"
                        (onChange)="marcarCambios()"
                        class="w-full"
                      ></p-select>
                      <label for="nivel-log">Nivel de Log</label>
                    </p-floatlabel>
            </div>
          </p-accordioncontent>
        </p-accordionpanel>
      </p-accordion>
    </div>
  </div>
</div>